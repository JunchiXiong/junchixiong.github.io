<!DOCTYPE HTML>
<html>
<head>
    <meta charset="UTF-8">
    <style type="text/css">
        canvas {
            position: absolute;
            top: 0px;
            left: 0px;
        }
    </style>
    <title>时钟</title>
</head>
<body>
    <canvas id="canvas" width="300" height="300"></canvas>
    <canvas id="p_canvas" width="300" height="300"></canvas>
    <canvas id="myCanvas" width="300" height="350" >
        您的浏览器不支持 HTML5 canvas 标签。
    </canvas>


    <script type="text/javascript">
        //获取画图对象
        var canvas = document.getElementById("canvas");
        var context = canvas.getContext("2d");

        var p_canvas = document.getElementById("p_canvas");
        var p_context = p_canvas.getContext("2d");

        var c=document.getElementById("myCanvas");
        var ctx = c.getContext("2d");
        ctx.font = "30px Arial";

        var height = 300, width = 300;

        //画大圆
        context.beginPath();
        context.strokeStyle = "#009999";
        context.arc(width / 2, height / 2, width / 2 - 1, 0, Math.PI * 2, true);
        context.stroke();
        context.closePath();


        //画中间点
        context.beginPath();
        context.fillStyle = "#000";
        context.arc(width / 2, height / 2, 3, 0, Math.PI * 2, true);
        context.fill();
        context.closePath();

        //画小刻度
        var angle = 0, radius = width / 2 - 4;
        //1圈60分钟，所以画60个格子
        for (var i = 0; i < 60; i++) {
            context.beginPath();
            context.strokeStyle = "#000";
            //确认刻度的起始点
            //加上一半的画布宽度、高度，使其处于画布中心
            var x = width / 2 + radius * Math.cos(angle), y = height / 2 + radius * Math.sin(angle);
            //定义线条开始坐标
            context.moveTo(x, y);
            //此处是用于将刻度的另一点指向中心点，并给予正确的角度
            //PI是180°，正确的角度是angle+180°，正好相反方向
            var temp_angle = Math.PI + angle;
            //定义线条结束坐标
            context.lineTo(x + 3 * Math.cos(temp_angle), y + 3 * Math.sin(temp_angle));
            //使用stroke方法来绘制线条
            context.stroke();
            context.closePath();
            //1圈360°，总共有60个小刻度，所以一个刻度对应360°/60=6°
            //angle正好是180°/30= 6°
            angle += Math.PI / 30;
        }

        //画大刻度
        angle = 0, radius = width / 2 - 4;
        context.textBaseline = "middle";
        context.textAlign = "center";
        context.lineWidth = 2;
        for (var i = 0; i < 12; i++) {
            //cos 0° =1,sin 0°=0，所以此时第一个大刻度是出现在3的位置，但i却是0，所以需要加上3
            //超过12之后再减去12即可
            var num = i + 3 > 12 ? i + 3 - 12 : i + 3;
            context.beginPath();
            context.strokeStyle = "#000080";
            var x = width / 2 + radius * Math.cos(angle), y = height / 2 + radius * Math.sin(angle);
            context.moveTo(x, y);
            var temp_angle = Math.PI + angle;
            context.lineTo(x + 12 * Math.cos(temp_angle), y + 12 * Math.sin(temp_angle));
            //使用stroke方法来绘制线条
            context.stroke();
            context.closePath();
            //大刻度  文字
            context.fillText(num, x + 20 * Math.cos(temp_angle), y + 20 * Math.sin(temp_angle));
            angle += Math.PI / 6;
        }

        //定时器
        function Pointer() {
            var p_type = [["#000", 100, 1], ["red", 90, 2], ["blue", 80, 3]];
            function drawPointer(type, angle) {
                type = p_type[type];
                //计算转动角度
                angle = angle * Math.PI * 2 - Math.PI / 2;
                var length = type[1];
                p_context.beginPath();
                p_context.lineWidth = type[2];
                p_context.strokeStyle = type[0];
                p_context.moveTo(width / 2, height / 2);
                p_context.lineTo(width / 2 + length * Math.cos(angle), height / 2 + length * Math.sin(angle));
                p_context.stroke();
                p_context.closePath();
            }

            //设置定时器
            setInterval(function () {
                //清除以（0,0）为起点，高度为height，宽度为width的矩形内的指定像素
                p_context.clearRect(0, 0, height, width);
                var time = new Date();
                var hour = time.getHours();
                var minute = time.getMinutes();
                var second = time.getSeconds();

                ctx.clearRect(0, 0, 300, 350);
                ctx.fillText(hour + ":" + minute + ":" + second, 100, 340);

                hour = hour > 12 ? hour - 12 : hour;
                hour = hour + minute / 60;
                //计算转动角度
                hour = hour / 12;
                minute = minute / 60;
                second = second / 60;
                //绘制时针、分针、秒针
                drawPointer(0, second);
                drawPointer(1, minute);
                drawPointer(2, hour);
            }, 1000);

        }

        var p = new Pointer();

    </script>



</body>
</html>


